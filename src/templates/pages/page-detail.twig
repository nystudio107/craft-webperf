{# @var craft \craft\web\twig\variables\CraftVariable #}
{#
/**
 * Webperf plugin for Craft CMS 3.x
 *
 * Monitor the performance of your webpages through real-world user timing data
 *
 * @link      https://nystudio107.com
 * @copyright Copyright (c) 2018 nystudio107
 */
#}

{% requirePermission "webperf:pages" %}

{% extends "webperf/_layouts/webperf-cp.twig" %}

{% import "_includes/forms" as forms %}

{% block contextMenu %}
    {% include "webperf/_includes/sites-menu.twig" with {'params': {'pageUrl': pageUrl}} %}
{% endblock %}

{% block actionButton %}
    <div class="buttons">
        <div class="webperf-button-container">
            <a href="{{ actionUrl('webperf/file/export-data-samples') }}" class="btn icon">{{ "Export Data Samples"|t }}</a>
        </div>
        <a href="{{ actionUrl('retour/metrics/export-data-samples') }}" class="btn delete icon">{{ "Clear Data Samples"|t }}</a>
    </div>
{% endblock %}

{% block content %}
    <div id="cp-nav-content">
        <h1 class="text-center text-base text-4xl font-bold">{{ pageUrl }}</h1>
        <div class="flex overflow-hidden w-full flex-no-wrap">
            <div class="flex-grow">
                <div class="shadow">
                    <page-detail-area-chart
                            title="404s by Month"
                            sub-title="Discrete 404 URI hits in the last month"
                            range="month"
                            :site-id="{{ currentSiteId }}"
                    >
                    </page-detail-area-chart>
                </div>
            </div>
        </div>
        <page-detail-table :site-id="{{ currentSiteId }}"
                            page-url="{{ pageUrl }}"
        >
        </page-detail-table>
    </div>
    {# include our JavaScript modules #}
    {{ parent() }}
    {{ craft.webperf.includeJsModule("page-detail.js", false) }}
{% endblock %}
