{# @var craft \craft\web\twig\variables\CraftVariable #}
{#
/**
 * Webperf plugin for Craft CMS 3.x
 *
 * Monitor the performance of your webpages through real-world user timing data
 *
 * @link      https://nystudio107.com
 * @copyright Copyright (c) 2018 nystudio107
 */
#}

{% requirePermission "webperf:settings" %}

{% extends "_layouts/cp" %}

{% import "_includes/forms" as forms %}
{% from "webperf/_includes/macros.twig" import configWarning %}

{% block content %}

    <input type="hidden" name="action" value="webperf/settings/save-plugin-settings">
    <input type="hidden" name="pluginHandle" value="webperf">

    {{ redirectInput("webperf/settings") }}
    {% namespace "settings" %}
        {{ forms.textField({
            label: "Plugin name"|t("webperf"),
            instructions: "The public-facing name of the plugin"|t("webperf"),
            id: "pluginName",
            name: "pluginName",
            value: settings.pluginName,
            warning: configWarning("pluginName", "webperf"),
            errors: settings.getErrors("pluginName"),
        }) }}

        {{ forms.lightswitchField({
            label: "Include User Timing Beacon"|t("webperf"),
            instructions: "Whether or not the User Timing Beacon should be rendered on frontend pages."|t("webperf"),
            id: "includeBeacon",
            name: "includeBeacon",
            on: settings.includeBeacon,
            warning: configWarning("includeBeacon", "webperf"),
            errors: settings.getErrors("includeBeacon"),
        }) }}

        {{ forms.lightswitchField({
            label: "Include Craft Profiling"|t("webperf"),
            instructions: "Whether or not the Craft profiling data should be recorded for site requests."|t("webperf"),
            id: "includeCraftProfiling",
            name: "includeCraftProfiling",
            on: settings.includeCraftProfiling,
            warning: configWarning("includeCraftProfiling", "webperf"),
            errors: settings.getErrors("includeCraftProfiling"),
        }) }}

        {{ forms.textField({
            label: "Webperf Data Samples to Store"|t("webperf"),
            instructions: "How many unique Webperf Data Samples should be stored before they are trimmed."|t("webperf"),
            id: "dataSamplesStoredLimit",
            name: "dataSamplesStoredLimit",
            size: 10,
            maxlength: 10,
            value: settings.dataSamplesStoredLimit,
            warning: configWarning("dataSamplesStoredLimit", "webperf"),
            errors: settings.getErrors("dataSamplesStoredLimit"),
        }) }}

        {{ forms.lightswitchField({
            label: "Automatically Trim Data Samples"|t("webperf"),
            instructions: "Whether the Data Samples should be trimmed after each new Data Sample is added"|t("webperf"),
            id: "automaticallyTrimDataSamples",
            name: "automaticallyTrimDataSamples",
            on: settings.automaticallyTrimDataSamples,
            warning: configWarning("automaticallyTrimDataSamples", "webperf"),
            errors: settings.getErrors("automaticallyTrimDataSamples"),
        }) }}

    {% endnamespace %}

    {# include our JavaScript modules #}
    {{ parent() }}
{% endblock %}
