{# @var craft \craft\web\twig\variables\CraftVariable #}
{#
/**
 * Webperf plugin for Craft CMS 3.x
 *
 * Monitor the performance of your webpages through real-world user timing data
 *
 * @link      https://nystudio107.com
 * @copyright Copyright (c) 2018 nystudio107
 */
#}

{% requirePermission "webperf:dashboard" %}

{% extends "webperf/_layouts/webperf-cp.twig" %}

{% import "_includes/forms" as forms %}

{% block contextMenu %}
    {% include "webperf/_includes/sites-menu.twig" %}
{% endblock %}

{% block actionButton %}
{% endblock %}

{% block content %}
    <style>
        #content {
            background: none !important;
        }
    </style>
    <div id="cp-nav-content">
        {% if showWelcome %}
        <div class="field readable">
                <confetti>
                </confetti>
                <div class="readable" style="text-align:center; margin:0 auto; padding: 5% 10%;">
                    <img src="{{ baseAssetsUrl ~ '/img/Webperf-icon.svg' }}"
                         width="30%" height="auto"/>
                    <h2>Thanks for using Webperf!</h2>
                    <p>
                        Monitor the performance of your webpages through real-world user timing data.
                    </p>
                    <p>
                    </p>
                    <p>We hope you love it! For more information, please <a href="{{ docsUrl }}" target="_blank" rel="noopener">see the documentation</a>.</p>
                </div>
        </div>
        {% endif %}
        {% if settings.includeBeacon %}
            {# -- Frontend -- #}
            {% include "webperf/dashboard/_includes/frontend.twig" %}

            {# -- Backend -- #}
            {% include "webperf/dashboard/_includes/backend.twig" %}
        {% endif %}

        {% if settings.includeCraftProfiling %}
            {# -- Craft -- #}
            {% include "webperf/dashboard/_includes/craft.twig" %}
        {% endif %}

        <div class="text-center p-8">
                <div class="webperf-tooltip inline-block w-full max-w-xl good-bad-ugly">
                    <span class="webperf-tooltiptext webperf-tooltip-visible" style="left: 30px;">Fast</span>
                    <span class="webperf-tooltiptext webperf-tooltip-visible" style="left: 50%;">Average</span>
                    <span class="webperf-tooltiptext webperf-tooltip-visible" style="left: auto; right: 0;">Slow</span>
                </div>
        </div>
    </div>
    {# include our JavaScript modules #}
    {{ parent() }}
    {{ craft.webperf.includeJsModule("dashboard.js", false) }}
{% endblock %}
