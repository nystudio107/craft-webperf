/*!
 * @project        Webperf
 * @name           pages-index.js
 * @author         Andrew Welch
 * @build          Fri, Jan 18, 2019 6:24 AM ET
 * @release        ac6772c1e5caded79950a0b58023a70fe1f758c1 [develop]
 * @copyright      Copyright (c) 2019 nystudio107
 *
 */!function(t){function e(e){for(var n,s,l=e[0],o=e[1],c=e[2],d=0,f=[];d<l.length;d++)s=l[d],i[s]&&f.push(i[s][0]),i[s]=0;for(n in o)Object.prototype.hasOwnProperty.call(o,n)&&(t[n]=o[n]);for(u&&u(e);f.length;)f.shift()();return r.push.apply(r,c||[]),a()}function a(){for(var t,e=0;e<r.length;e++){for(var a=r[e],n=!0,l=1;l<a.length;l++){var o=a[l];0!==i[o]&&(n=!1)}n&&(r.splice(e--,1),t=s(s.s=a[0]))}return t}var n={},i={2:0},r=[];function s(e){if(n[e])return n[e].exports;var a=n[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,s),a.l=!0,a.exports}s.m=t,s.c=n,s.d=function(t,e,a){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},s.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(s.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)s.d(a,n,function(e){return t[e]}.bind(null,n));return a},s.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="";var l=window.webpackJsonp=window.webpackJsonp||[],o=l.push.bind(l);l.push=e,l=l.slice();for(var c=0;c<l.length;c++)e(l[c]);var u=o;r.push([154,0]),a()}({154:function(t,e,a){"use strict";a.r(e);var n=a(6),i=a.n(n),r=a(30),s=a.n(r),l=function(){var t=this.$createElement;return(this._self._c||t)("apexcharts",{attrs:{width:"100%",height:"200px",type:"area",options:this.chartOptions,series:this.series}})};l._withStripped=!0;a(24),a(41),a(28),a(9);var o=a(10),c=a.n(o),u=a(31);function d(t,e,a,n,i,r,s){try{var l=t[r](s),o=l.value}catch(t){return void a(t)}l.done?e(o):Promise.resolve(o).then(n,i)}var f=function(t,e,a){t.get(e).then(function(t){a&&a(t.data)}).catch(function(t){console.log(t)})},p={components:{apexcharts:a.n(u).a},props:{title:String,subTitle:String,range:String,siteId:{type:Number,default:0}},methods:{getSeriesData:function(){var t,e=(t=regeneratorRuntime.mark(function t(){var e,a,n=this;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e=c.a.create({baseURL:"/retour/charts/dashboard/",headers:{"X-Requested-With":"XMLHttpRequest"}}),a=this.range,0!==this.siteId&&(a+="/"+this.siteId),t.next=5,f(e,a,function(t){var e,a=Object.assign({},n.chartOptions);void 0!==t[0]&&(a.yaxis.max=Math.round((e=[t[0].data],e.map(function(t){return Math.max.apply(null,t)}))[0]+1.5),a.labels=t[0].labels,n.chartOptions=a,n.series=t)});case 5:case"end":return t.stop()}},t,this)}),function(){var e=this,a=arguments;return new Promise(function(n,i){var r=t.apply(e,a);function s(t){d(r,n,i,s,l,"next",t)}function l(t){d(r,n,i,s,l,"throw",t)}s(void 0)})});return function(){return e.apply(this,arguments)}}()},created:function(){this.getSeriesData()},mounted:function(){},data:function(){return{chartOptions:{chart:{id:"vuechart-dashboard",toolbar:{show:!1},sparkline:{enabled:!0}},colors:["#008FFB","#DCE6EC"],stroke:{curve:"straight",width:3},fill:{opacity:.2,gradient:{enabled:!0}},xaxis:{crosshairs:{width:1}},labels:[],yaxis:{min:0,max:0},title:{text:this.title,offsetX:0,style:{fontSize:"24px",cssClass:"apexcharts-yaxis-title"}},subtitle:{text:this.subTitle,offsetX:0,style:{fontSize:"14px",cssClass:"apexcharts-yaxis-title"}}},series:[{name:"empty",data:[0]}]}}},h=a(0),g=Object(h.a)(p,l,[],!1,null,null,null);g.options.__file="src/assetbundles/webperf/src/vue/PagesIndexBarChart.vue";var b=g.exports,v=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"py-4"},[a("vuetable-filter-bar"),t._v(" "),a("div",{staticClass:"vuetable-pagination clearafter"},[a("vuetable-pagination-info",{ref:"paginationInfoTop"}),t._v(" "),a("vuetable-pagination",{ref:"paginationTop",on:{"vuetable-pagination:change-page":t.onChangePage}})],1),t._v(" "),a("vuetable",{ref:"vuetable",attrs:{"api-url":"/webperf/tables/pages-index","per-page":20,fields:t.fields,css:t.css,"sort-order":t.sortOrder,"append-params":t.moreParams},on:{"vuetable:pagination-data":t.onPaginationData,"vuetable:row-clicked":t.onRowClicked,"vuetable:loaded":t.onLoaded},scopedSlots:t._u([{key:"load-time-bar",fn:function(e){return[a("div",{staticClass:"inline-block align-middle",staticStyle:{width:"80%"}},[a("request-bar-chart",{attrs:{rowData:e.rowData}})],1),t._v("\n            "+t._s(t.statFormatter(e.rowData.totalPageLoad))+"\n        ")]}},{key:"page-listing-display",fn:function(e){return[a("page-result-cell",{attrs:{title:e.rowData.title,url:e.rowData.url,width:e.rowData.totalPageLoad/t.maxValue*100,color:t.triBlend.colorFromPercentage(e.rowData.totalPageLoad/t.maxValue*100)}})]}}])}),t._v(" "),a("div",{staticClass:"vuetable-pagination clearafter"},[a("vuetable-pagination-info",{ref:"paginationInfo"}),t._v(" "),a("vuetable-pagination",{ref:"pagination",on:{"vuetable-pagination:change-page":t.onChangePage}})],1)],1)};v._withStripped=!0;var m=[{name:"__slot:page-listing-display",sortField:"url",title:"Page",titleClass:"center pageListingDisplay",dataClass:"center"},{name:"__slot:load-time-bar",sortField:"totalPageLoad",title:"Request Timeline",titleClass:"center loadTimeBar",dataClass:"center"},{name:"maxTotalPageLoad",visible:!1},{name:"domInteractive",visible:!1},{name:"firstContentfulPaint",visible:!1},{name:"firstPaint",visible:!1},{name:"firstByte",visible:!1},{name:"connect",visible:!1},{name:"dns",visible:!1},{name:"craftDbCnt",sortField:"craftDbCnt",title:"DB Queries",titleClass:"text-right",dataClass:"text-right",callback:"countFormatter"},{name:"craftTwigCnt",sortField:"craftTwigCnt",title:"Templates",titleClass:"text-right",dataClass:"text-right",callback:"countFormatter"},{name:"craftOtherCnt",sortField:"craftOtherCnt",title:"Other",titleClass:"text-right",dataClass:"text-right",callback:"countFormatter"},{name:"craftTotalMemory",sortField:"craftTotalMemory",title:"Memory",titleClass:"text-right",dataClass:"text-right",callback:"memoryFormatter"},{name:"cnt",sortField:"cnt",title:"Samples",titleClass:"text-right",dataClass:"text-right",callback:"countFormatter"}],P=a(73),_=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{directives:[{name:"show",rawName:"v-show",value:t.tablePagination&&t.tablePagination.last_page>1,expression:"tablePagination && tablePagination.last_page > 1"}],class:t.css.wrapperClass},[a("a",{class:["btn-nav",t.css.linkClass,t.isOnFirstPage?t.css.disabledClass:""],on:{click:function(e){t.loadPage(1)}}},[""!=t.css.icons.first?a("i",{class:[t.css.icons.first]}):a("span",[t._v("«")])]),t._v(" "),a("a",{class:["btn-nav",t.css.linkClass,t.isOnFirstPage?t.css.disabledClass:""],on:{click:function(e){t.loadPage("prev")}}},[""!=t.css.icons.next?a("i",{class:[t.css.icons.prev]}):a("span",[t._v(" ‹")])]),t._v(" "),t.notEnoughPages?[t._l(t.totalPage,function(e){return[a("a",{class:[t.css.pageClass,t.isCurrentPage(e)?t.css.activeClass:""],domProps:{innerHTML:t._s(e)},on:{click:function(a){t.loadPage(e)}}})]})]:[t._l(t.windowSize,function(e){return[a("a",{class:[t.css.pageClass,t.isCurrentPage(t.windowStart+e-1)?t.css.activeClass:""],domProps:{innerHTML:t._s(t.windowStart+e-1)},on:{click:function(a){t.loadPage(t.windowStart+e-1)}}})]})],t._v(" "),a("a",{class:["btn-nav",t.css.linkClass,t.isOnLastPage?t.css.disabledClass:""],on:{click:function(e){t.loadPage("next")}}},[""!=t.css.icons.next?a("i",{class:[t.css.icons.next]}):a("span",[t._v("› ")])]),t._v(" "),a("a",{class:["btn-nav",t.css.linkClass,t.isOnLastPage?t.css.disabledClass:""],on:{click:function(e){t.loadPage(t.totalPage)}}},[""!=t.css.icons.last?a("i",{class:[t.css.icons.last]}):a("span",[t._v("»")])])],2)};_._withStripped=!0;var x={props:{css:{type:Object,default:function(){return{wrapperClass:"vuetable pagination float-right py-4",activeClass:"active large",disabledClass:"disabled",pageClass:"item btn",linkClass:"item btn",paginationClass:"ui bottom attached segment grid",paginationInfoClass:"left floated left aligned six wide column",dropdownClass:"ui search dropdown",icons:{first:"",prev:"",next:"",last:""}}}},onEachSide:{type:Number,default:function(){return 2}}},data:function(){return{eventPrefix:"vuetable-pagination:",tablePagination:null}},computed:{totalPage:function(){return null===this.tablePagination?0:this.tablePagination.last_page},isOnFirstPage:function(){return null!==this.tablePagination&&1===this.tablePagination.current_page},isOnLastPage:function(){return null!==this.tablePagination&&this.tablePagination.current_page===this.tablePagination.last_page},notEnoughPages:function(){return this.totalPage<2*this.onEachSide+4},windowSize:function(){return 2*this.onEachSide+1},windowStart:function(){return!this.tablePagination||this.tablePagination.current_page<=this.onEachSide?1:this.tablePagination.current_page>=this.totalPage-this.onEachSide?this.totalPage-2*this.onEachSide:this.tablePagination.current_page-this.onEachSide}},methods:{loadPage:function(t){this.$emit(this.eventPrefix+"change-page",t)},isCurrentPage:function(t){return t===this.tablePagination.current_page},setPaginationData:function(t){this.tablePagination=t},resetData:function(){this.tablePagination=null}}},C=Object(h.a)(x,void 0,void 0,!1,null,null,null);C.options.__file="src/assetbundles/webperf/src/vue/VuetablePaginationMixin.vue";var w={mixins:[C.exports]},y=Object(h.a)(w,_,[],!1,null,null,null);y.options.__file="src/assetbundles/webperf/src/vue/VuetablePagination.vue";var S=y.exports,F=function(){var t=this.$createElement;return(this._self._c||t)("div",{class:["vuetable-pagination-info",this.css.infoClass],domProps:{innerHTML:this._s(this.paginationInfo)}})};F._withStripped=!0;a(145);var T={props:{css:{type:Object,default:function(){return{infoClass:"left floated left py-5 text-grey-dark"}}},infoTemplate:{type:String,default:function(){return"Displaying {from} to {to} of {total} items"}},noDataTemplate:{type:String,default:function(){return"No relevant data"}}},data:function(){return{tablePagination:null}},computed:{paginationInfo:function(){return null==this.tablePagination||0==this.tablePagination.total?this.noDataTemplate:this.infoTemplate.replace("{from}",this.tablePagination.from||0).replace("{to}",this.tablePagination.to||0).replace("{total}",this.tablePagination.total||0)}},methods:{setPaginationData:function(t){this.tablePagination=t},resetData:function(){this.tablePagination=null}}},k=Object(h.a)(T,void 0,void 0,!1,null,null,null);k.options.__file="src/assetbundles/webperf/src/vue/VuetablePaginationInfoMixin.vue";var O={mixins:[k.exports]},D=Object(h.a)(O,F,[],!1,null,null,null);D.options.__file="src/assetbundles/webperf/src/vue/VuetablePaginationInfo.vue";var $=D.exports,I=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"filter-bar"},[a("div",{staticClass:"ui form"},[a("div",{staticClass:"inline field"},[a("label",{staticClass:"text-grey-dark"},[t._v("Search for:")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.filterText,expression:"filterText"}],staticClass:"text nicetext",attrs:{type:"text",placeholder:""},domProps:{value:t.filterText},on:{keyup:t.doFilter,input:function(e){e.target.composing||(t.filterText=e.target.value)}}}),t._v(" "),a("button",{staticClass:"btn delete icon",on:{click:t.resetFilter}},[t._v("Reset")])])])])};I._withStripped=!0;var R={data:function(){return{filterText:""}},methods:{doFilter:function(){this.$events.fire("filter-set",this.filterText)},resetFilter:function(){this.filterText="",this.$events.fire("filter-reset")}}},j=Object(h.a)(R,I,[],!1,null,null,null);j.options.__file="src/assetbundles/webperf/src/vue/VuetableFilterBar.vue";var M=j.exports,E=a(8),L=function(){var t=this.$createElement;return(this._self._c||t)("request-bar-recursive",{attrs:{column:this.root.column,color:this.root.color,label:this.root.label,value:this.root.value,parentValue:this.root.parentValue,nodes:this.root.nodes}})};L._withStripped=!0;var B=function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"h-5",class:this.color,style:{width:this.value/this.parentValue*100+"%"},attrs:{title:this.label}},this._l(this.nodes,function(t){return e("request-bar-recursive",{attrs:{column:t.column,color:t.color,label:t.label,value:t.value,parentValue:t.parentValue,nodes:t.nodes}})}),1)};B._withStripped=!0;var N={props:{column:String,color:String,label:String,value:Number,parentValue:Number,nodes:Array},name:"request-bar-recursive"},V=Object(h.a)(N,B,[],!1,null,null,null);V.options.__file="src/assetbundles/webperf/src/vue/RequestBarRecursive.vue";var q=V.exports,H=[{column:"totalPageLoad",color:"bg-blue-dark",label:"Page Loaded"},{column:"domInteractive",color:"bg-blue",label:"DOM Interactive"},{column:"firstContentfulPaint",color:"bg-blue-light",label:"First Contentful Paint"},{column:"firstPaint",color:"bg-blue-lighter",label:"First Paint"},{column:"firstByte",color:"bg-orange-dark",label:"First Byte"},{column:"connect",color:"bg-orange",label:"Connect"},{column:"dns",color:"bg-orange-light",label:"DNS Lookup"},{column:"craftTotalMs",color:"bg-red-dark",label:"Craft Rendering"},{column:"craftTwigMs",color:"bg-red",label:"Twig Rendering"},{column:"craftDbMs",color:"bg-red-light",label:"DB Queries"}],G={name:"request-bar-chart",components:{"request-bar-recursive":q},props:{rowData:Object},data:function(){return{root:void 0}},mounted:function(){var t=this;this.$events.$on("refresh-table-components",function(e){return t.onTableRefresh(e)})},created:function(){this.calculateNodes()},methods:{onTableRefresh:function(t){this.calculateNodes()},calculateNodes:function(){var t=this;this.root=void 0,H.forEach(function(e){var a={column:e.column,color:e.color,label:e.label,value:parseFloat(t.rowData[e.column])||null,parentValue:parseFloat(t.rowData.maxTotalPageLoad)||null,nodes:void 0};if(null!==a.value)if(t.root)for(var n=t.root;n;)!n.nodes||a.value>n.value?(a.nodes=n.nodes,a.parentValue=n.parentValue,n.nodes=[a],n=a.nodes||void 0):n=n.nodes[0]||void 0;else t.root=a}),console.log(this.root)}}},z=Object(h.a)(G,L,[],!1,null,null,null);z.options.__file="src/assetbundles/webperf/src/vue/RequestBarChart.vue";var X=z.exports,A=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"relative single-line-truncate-wrapper"},[a("div",{staticClass:"text-base font-normal truncate-label",staticStyle:{color:"rgb(26, 13, 171)",width:"100%",height:"20px"},attrs:{title:t.title}},[t.title?a("span",[t._v(t._s(t.title))]):a("span",{staticClass:"text-grey-light"},[a("em",[t._v("untitled")])])])]),t._v(" "),a("div",{staticClass:"relative single-line-truncate-wrapper"},[a("cite",{staticClass:"text-sm font-normal truncate-label single-line-truncate",staticStyle:{color:"rgb(0, 102, 33)",width:"100%"},attrs:{title:t.url}},[t._v("\n            "+t._s(t.url)+"\n        ")])]),t._v(" "),a("div",{staticClass:"py-2"},[a("div",{staticClass:"simple-bar-chart-track rounded-full bg-grey-lighter"},[a("div",{staticClass:"simple-bar-line h-2 rounded-full",style:{width:t.width+"%",backgroundColor:t.color}})])])])};A._withStripped=!0;var J={props:{title:String,url:String,width:Number,color:String},name:"page-result-cell"},Q=Object(h.a)(J,A,[],!1,null,null,null);Q.options.__file="src/assetbundles/webperf/src/vue/PageResultCell.vue";var U=Q.exports,W={components:{vuetable:P.a,"vuetable-pagination":S,"vuetable-pagination-info":$,"vuetable-filter-bar":M,"request-bar-chart":X,"page-result-cell":U},props:{fastColor:{type:String,default:"#00C800"},averageColor:{type:String,default:"#FFFF00"},slowColor:{type:String,default:"#C80000"},maxValue:{type:Number,default:1e4},siteId:{type:Number,default:0}},data:function(){return{moreParams:{siteId:this.siteId},css:{tableClass:"data fullwidth webperf-pages-index",ascendingIcon:"menubtn webperf-menubtn-asc",descendingIcon:"menubtn webperf-menubtn-desc"},sortOrder:[{field:"__slot:load-time-bar",sortField:"totalPageLoad",direction:"desc"}],fields:m,triBlend:new E.a(this.fastColor,this.averageColor,this.slowColor)}},mounted:function(){var t=this;this.$events.$on("filter-set",function(e){return t.onFilterSet(e)}),this.$events.$on("filter-reset",function(e){return t.onFilterReset()})},methods:{onFilterSet:function(t){this.moreParams={siteId:this.siteId,filter:t},this.$events.fire("refresh-table",this.$refs.vuetable)},onFilterReset:function(){this.moreParams={siteId:this.siteId},this.$events.fire("refresh-table",this.$refs.vuetable)},onLoaded:function(){console.log("fired"),this.$events.fire("refresh-table-components",this.$refs.vuetable)},onPaginationData:function(t){this.$refs.paginationTop.setPaginationData(t),this.$refs.paginationInfoTop.setPaginationData(t),this.$refs.pagination.setPaginationData(t),this.$refs.paginationInfo.setPaginationData(t)},onChangePage:function(t){this.$refs.vuetable.changePage(t)},onRowClicked:function(t,e){console.log(t)},statFormatter:function(t){return Number(t/1e3).toFixed(2)+"s"},countFormatter:function(t){return Number(t).toFixed(0)},memoryFormatter:function(t){return Number(t/1048576).toFixed(2)+" Mb"}}},K=Object(h.a)(W,v,[],!1,null,null,null);K.options.__file="src/assetbundles/webperf/src/vue/PagesIndexTable.vue";var Y=K.exports;i.a.use(s.a);new i.a({el:"#cp-nav-content",components:{"pages-index-bar-chart":b,"pages-index-table":Y},data:{},methods:{onTableRefresh:function(t){i.a.nextTick(function(){return t.refresh()})}},mounted:function(){var t=this;this.$events.$on("refresh-table",function(e){return t.onTableRefresh(e)})}})},8:function(t,e,a){"use strict";a.d(e,"a",function(){return i});a(64);function n(t,e){for(var a=0;a<e.length;a++){var n=e[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var i=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"#00C800",a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"#FFFF00",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"#C80000";!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),console.log(e,a,n),this.clr1=this.HexToRGB(e),this.clr2=this.HexToRGB(a),this.clr3=this.HexToRGB(n)}var e,a,i;return e=t,(a=[{key:"RGBToHex",value:function(t,e,a){var n;return n=(t<<16|e<<8|a).toString(16).toUpperCase(),new Array(7-n.length).join("0")+n}},{key:"HexToRGB",value:function(t){var e=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);return e?{r:parseInt(e[1],16),g:parseInt(e[2],16),b:parseInt(e[3],16)}:null}},{key:"colorFromPercentage",value:function(t){var e=this.clr1,a=this.clr2;t>=50&&(e=this.clr2,a=this.clr3,t-=50);var n=t/50,i=Math.round(e.r+n*(a.r-e.r)),r=Math.round(e.g+n*(a.g-e.g)),s=Math.round(e.b+n*(a.b-e.b));return"#"+this.RGBToHex(i,r,s)}}])&&n(e.prototype,a),i&&n(e,i),t}()}});
//# sourceMappingURL=pages-index.js.map