{"version":3,"file":"RequestBarChart-f9j8xduA.js","sources":["../../../../../buildchain/src/vue/charts/common/RequestBarRecursive.vue","../../../../../buildchain/src/vue/charts/common/RequestBarChart.vue"],"sourcesContent":["<template>\n  <div\n    :class=\"color\"\n    :style=\"{width: ((value / parentValue) * 100) + '%'}\"\n    :title=\"label + ' ' + statFormatter(value)\"\n    class=\"h-5\"\n  >\n    <request-bar-recursive\n      v-for=\"node in nodes\"\n      :key=\"node.column\"\n      :color=\"node.color\"\n      :column=\"node.column\"\n      :label=\"node.label\"\n      :nodes=\"node.nodes\"\n      :parent-value=\"node.parentValue\"\n      :value=\"node.value\"\n    />\n  </div>\n</template>\n<script>\nexport default {\n  name: 'RequestBarRecursive',\n  props: {\n    column: {\n      type: String,\n      default: '',\n    },\n    color: {\n      type: String,\n      default: '',\n    },\n    label: {\n      type: String,\n      default: '',\n    },\n    value: {\n      type: Number,\n      default: 0,\n    },\n    parentValue: {\n      type: Number,\n      default: 0,\n    },\n    nodes: {\n      type: Array,\n      default: () => ([]),\n    },\n  },\n  methods: {\n    statFormatter(val) {\n      return Number(val / 1000).toFixed(2) + \"s\";\n    },\n  },\n}\n</script>\n","<template>\n  <div class=\"flex flex-no-wrap\">\n    <div\n      v-if=\"rowData.type === 'both'\"\n      class=\"flex-shrink\"\n      title=\"Combined Frontend & Craft Beacon\"\n    >\n      <div class=\"w-2 h-2 bg-blue-700 rounded-full mb-1\" />\n      <div class=\"w-2 h-2 bg-orange-700 rounded-full\" />\n    </div>\n    <div\n      v-if=\"rowData.type === 'frontend'\"\n      class=\"flex-shrink\"\n      title=\"Frontend Beacon only\"\n    >\n      <div class=\"w-2 h-2 bg-blue-700 rounded-full mb-1\" />\n      <div class=\"w-2 h-2 bg-transparent rounded-full\" />\n    </div>\n    <div\n      v-if=\"rowData.type === 'craft'\"\n      class=\"flex-shrink\"\n      title=\"Craft Beacon only\"\n    >\n      <div class=\"w-2 h-2 bg-transparent rounded-full mb-1\" />\n      <div class=\"w-2 h-2 bg-orange-700 rounded-full\" />\n    </div>\n    <div class=\"flex-grow\">\n      <request-bar-recursive\n        :color=\"root.color\"\n        :column=\"root.column\"\n        :label=\"root.label\"\n        :nodes=\"root.nodes\"\n        :parent-value=\"root.parentValue\"\n        :value=\"root.value\"\n      />\n    </div>\n    <div class=\"flex-shrink\">\n      {{ statFormatter(root.value) }}\n    </div>\n  </div>\n</template>\n<script>\nimport RequestBarRecursive from '@/vue/charts/common/RequestBarRecursive.vue';\n\nconst requestBarGraphFields = [\n  {\n    column: 'pageLoad',\n    color: 'bg-blue-200',\n    label: 'Page Loaded',\n  },\n  {\n    column: 'domInteractive',\n    color: 'bg-blue-400',\n    label: 'DOM Interactive',\n  },\n  {\n    column: 'firstContentfulPaint',\n    color: 'bg-blue-500',\n    label: 'First Contentful Paint',\n  },\n  {\n    column: 'firstPaint',\n    color: 'bg-blue-700',\n    label: 'First Paint',\n  },\n  {\n    column: 'firstByte',\n    color: 'bg-orange-400',\n    label: 'First Byte',\n  },\n  {\n    column: 'connect',\n    color: 'bg-orange-500',\n    label: 'Connect',\n  },\n  {\n    column: 'dns',\n    color: 'bg-orange-700',\n    label: 'DNS Lookup',\n  },\n  {\n    column: 'craftTotalMs',\n    color: 'bg-red-400',\n    label: 'Craft Rendering',\n  },\n  {\n    column: 'craftTwigMs',\n    color: 'bg-red-500',\n    label: 'Twig Rendering',\n  },\n  {\n    column: 'craftDbMs',\n    color: 'bg-red-700',\n    label: 'Database Queries',\n  },\n];\n\nexport default {\n  name: 'RequestBarChart',\n  components: {\n    'request-bar-recursive': RequestBarRecursive,\n  },\n  props: {\n    rowData: {\n      type: Object,\n      default: () => ({}),\n    },\n  },\n  data: function () {\n    return {\n      root: undefined,\n    }\n  },\n  mounted() {\n    if (this.$events !== undefined) {\n      this.$events.$on('refresh-table-components', eventData => this.onTableRefresh(eventData));\n    }\n  },\n  created() {\n    this.calculateNodes();\n  },\n  methods: {\n    onTableRefresh: function () {\n      this.calculateNodes();\n    },\n    statFormatter(val) {\n      return Number(val / 1000).toFixed(2) + \"s\";\n    },\n    calculateNodes: function () {\n      this.root = undefined;\n      requestBarGraphFields.forEach((element) => {\n        let node = {\n          column: element.column,\n          color: element.color,\n          label: element.label,\n          value: parseFloat(this.rowData[element.column]) || null,\n          parentValue: parseFloat(this.rowData['maxTotalPageLoad']) || null,\n          nodes: undefined,\n        };\n        if (node.value) {\n          if (this.root) {\n            let searchNode = this.root;\n            while (searchNode) {\n              if (!searchNode.nodes || (!searchNode.value) || (node.value > searchNode.value)) {\n                node.nodes = searchNode.nodes;\n                node.parentValue = searchNode.parentValue || searchNode.value;\n                searchNode.nodes = [node];\n                searchNode = node.nodes || undefined;\n              } else {\n                searchNode = searchNode.nodes[0] || undefined;\n              }\n            }\n          } else {\n            this.root = node;\n          }\n        }\n      });\n    }\n  },\n}\n</script>\n"],"names":["_sfc_main","val","requestBarGraphFields","RequestBarRecursive","eventData","element","node","searchNode"],"mappings":"iDAoBA,MAAAA,EAAA,CACA,KAAA,sBACA,MAAA,CACA,OAAA,CACA,KAAA,OACA,QAAA,EACA,EACA,MAAA,CACA,KAAA,OACA,QAAA,EACA,EACA,MAAA,CACA,KAAA,OACA,QAAA,EACA,EACA,MAAA,CACA,KAAA,OACA,QAAA,CACA,EACA,YAAA,CACA,KAAA,OACA,QAAA,CACA,EACA,MAAA,CACA,KAAA,MACA,QAAA,IAAA,CAAA,CACA,CACA,EACA,QAAA,CACA,cAAAC,EAAA,CACA,OAAA,OAAAA,EAAA,GAAA,EAAA,QAAA,CAAA,EAAA,GACA,CACA,CACA,ibCTAC,EAAA,CACA,CACA,OAAA,WACA,MAAA,cACA,MAAA,aACA,EACA,CACA,OAAA,iBACA,MAAA,cACA,MAAA,iBACA,EACA,CACA,OAAA,uBACA,MAAA,cACA,MAAA,wBACA,EACA,CACA,OAAA,aACA,MAAA,cACA,MAAA,aACA,EACA,CACA,OAAA,YACA,MAAA,gBACA,MAAA,YACA,EACA,CACA,OAAA,UACA,MAAA,gBACA,MAAA,SACA,EACA,CACA,OAAA,MACA,MAAA,gBACA,MAAA,YACA,EACA,CACA,OAAA,eACA,MAAA,aACA,MAAA,iBACA,EACA,CACA,OAAA,cACA,MAAA,aACA,MAAA,gBACA,EACA,CACA,OAAA,YACA,MAAA,aACA,MAAA,kBACA,CACA,EAEAF,EAAA,CACA,KAAA,kBACA,WAAA,CACA,wBAAAG,CACA,EACA,MAAA,CACA,QAAA,CACA,KAAA,OACA,QAAA,KAAA,CAAA,EACA,CACA,EACA,KAAA,UAAA,CACA,MAAA,CACA,KAAA,MACA,CACA,EACA,SAAA,CACA,KAAA,UAAA,QACA,KAAA,QAAA,IAAA,2BAAAC,GAAA,KAAA,eAAAA,CAAA,CAAA,CAEA,EACA,SAAA,CACA,KAAA,eAAA,CACA,EACA,QAAA,CACA,eAAA,UAAA,CACA,KAAA,eAAA,CACA,EACA,cAAAH,EAAA,CACA,OAAA,OAAAA,EAAA,GAAA,EAAA,QAAA,CAAA,EAAA,GACA,EACA,eAAA,UAAA,CACA,KAAA,KAAA,OACAC,EAAA,QAAAG,GAAA,CACA,IAAAC,EAAA,CACA,OAAAD,EAAA,OACA,MAAAA,EAAA,MACA,MAAAA,EAAA,MACA,MAAA,WAAA,KAAA,QAAAA,EAAA,MAAA,CAAA,GAAA,KACA,YAAA,WAAA,KAAA,QAAA,gBAAA,GAAA,KACA,MAAA,MACA,EACA,GAAAC,EAAA,MACA,GAAA,KAAA,KAAA,CACA,IAAAC,EAAA,KAAA,KACA,KAAAA,GACA,CAAAA,EAAA,OAAA,CAAAA,EAAA,OAAAD,EAAA,MAAAC,EAAA,OACAD,EAAA,MAAAC,EAAA,MACAD,EAAA,YAAAC,EAAA,aAAAA,EAAA,MACAA,EAAA,MAAA,CAAAD,CAAA,EACAC,EAAAD,EAAA,OAAA,QAEAC,EAAAA,EAAA,MAAA,CAAA,GAAA,MAGA,MACA,KAAA,KAAAD,CAGA,CAAA,CACA,CACA,CACA"}