import{a as p,n as o,b as m,_ as f}from"./vendor.6a8d211c.js";import{R as h,S as _}from"./SimpleBarChart.cada778d.js";import{T as v}from"./tri-color-blend.3ecffd12.js";import{S as g}from"./SampleSizeWarning.2c2275fa.js";import{S as b}from"./SampleRangePicker.0e02f7a5.js";import{S}from"./SamplePaneFooter.c88f08be.js";import{R as C}from"./RecommendationsList.5608b603.js";var y=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("main")},$=[];Vue.use(p);const x={mounted:function(){this.$confetti.start({shape:"rect",colors:["DodgerBlue","OliveDrab","Gold","pink","SlateBlue","lightblue","Violet","PaleGreen","SteelBlue","SandyBrown","Chocolate","Crimson"]}),setTimeout(()=>{this.$confetti.stop()},5e3)},methods:{}},c={};var w=o(x,y,$,!1,F,null,null,null);function F(t){for(let a in c)this[a]=c[a]}var R=function(){return w.exports}(),P=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{on:{click:function(r){return t.redirectTo(t.detailPageUrl)}}},[e("div",{staticClass:"clearafter pb-1"},[e("div",{staticClass:"simple-bar-chart-label text-base font-normal truncate-label",staticStyle:{width:"90%"},attrs:{title:t.title}},[t.title?e("a",{staticStyle:{color:"rgb(26, 13, 171)"},attrs:{href:t.url,target:"_blank"},on:{click:function(r){r.stopPropagation()}}},[t._v(" "+t._s(t.title)+" ")]):e("span",{staticClass:"text-gray-300"},[e("em",[t._v("Craft backend route")])])]),e("div",{staticClass:"simple-bar-chart-value"},[e("sample-size-warning",{attrs:{sample:t.cnt}})],1)]),e("div",{staticClass:"clearafter pb-1"},[e("cite",{staticClass:"simple-bar-chart-label text-sm font-normal truncate-label",staticStyle:{width:"80%"},attrs:{title:t.url}},[e("a",{staticClass:"hover:no-underline",staticStyle:{color:"rgb(0, 102, 33)"},attrs:{href:t.url,target:"_blank"},on:{click:function(r){r.stopPropagation()}}},[t._v(" "+t._s(t.url)+" ")])]),e("div",{staticClass:"simple-bar-chart-value text-sm font-bold"},[t._v(t._s(t.data))])]),e("div",{staticClass:"py-1"},[e("div",{staticClass:"file-list-chart-track rounded-full bg-gray-200"},[e("div",{staticClass:"simple-bar-line h-2 rounded-full",style:{width:t.width+"%",backgroundColor:t.color}})])])])},k=[];const j={name:"dashboard-file-list-cell",components:{SampleSizeWarning:g},props:{title:String,url:String,detailPageUrl:String,data:String,cnt:Number,width:Number,color:String},methods:{redirectTo(t){window.location.href=t}}},d={};var B=o(j,P,k,!1,V,null,null,null);function V(t){for(let a in d)this[a]=d[a]}var D=function(){return B.exports}(),E=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("section",{staticClass:"px-3 py-3"},[e("div",{staticClass:"text-left text-base font-bold px-2 pt-2"},[t._v(" Slowest pages ")]),t._l(t.series,function(r){return e("div",{staticClass:"file-list-wrapper p-2"},[e("dashboard-file-list-cell",{attrs:{title:r.title,url:r.url,"detail-page-url":r.detailPageUrl,data:t.statFormatter(r.data,r.maxValue),cnt:r.cnt,width:r.data,color:r.barColor}})],1)})],2)},L=[];const N=t=>({baseURL:t,headers:{"X-Requested-With":"XMLHttpRequest"}}),U=(t,a,e,r)=>{t.get(a,{params:e}).then(s=>{r&&r(s.data)}).catch(s=>{console.log(s)})},T={name:"dashboard-file-list",components:{"dashboard-file-list-cell":D},props:{start:String,end:String,column:String,fastColor:{type:String,default:"#00C800"},averageColor:{type:String,default:"#FFFF00"},slowColor:{type:String,default:"#C80000"},limit:{type:Number,default:3},maxValue:Number,siteId:{type:Number,default:0},apiUrl:{type:String,default:""}},methods:{getSeriesData:async function(){const t=m.create(N(this.apiUrl));let a={column:this.column,start:this.displayStart,end:this.displayEnd,siteId:this.siteId};await U(t,"",a,e=>{e.forEach((r,s,n)=>{let l=r.avg/1e3,i=this.maxValue;l>i&&(i=l),l=l*100/i,n[s].data=l,n[s].maxValue=i,n[s].barColor=this.triBlend.colorFromPercentage(l)}),this.series=e})},onChangeRange(t){this.displayStart=t.start,this.displayEnd=t.end,this.getSeriesData()},statFormatter(t,a){return t=t*a/100,Number(t).toFixed(2)+"s"}},created(){this.getSeriesData()},mounted(){this.$events.$on("change-range",t=>this.onChangeRange(t))},data:function(){return{series:[],displayStart:this.start,displayEnd:this.end,triBlend:new v(this.fastColor,this.averageColor,this.slowColor)}}},u={};var z=o(T,E,L,!1,I,null,null,null);function I(t){for(let a in u)this[a]=u[a]}var M=function(){return z.exports}();Vue.use(f);new Vue({el:"#cp-nav-content",components:{confetti:R,"radial-bar-chart":h,"simple-bar-chart":_,"dashboard-file-list":M,"sample-range-picker":b,"sample-pane-footer":S,"recommendations-list":C},data:{},mounted(){}});
//# sourceMappingURL=dashboard.728fdf71.js.map
